{"remainingRequest":"C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\src\\store\\modules\\auth.js","mtime":1636271155798},{"path":"C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\babel.config.js","mtime":1636376524822},{"path":"C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\ASUS\\Desktop\\Blog-project\\blog-app\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CgovKioNCiAqIFRoaXMgbW9kdWxlIGlzIHJlc3BvbnNpYmxlIGZvciBhbGwgc3RhdGUgYW5kIGFjdGlvbnMgcmVsYXRlZCB0byB0aGUgY3VycmVudCBhdXRoZW50aWNhdGVkIHVzZXIuDQogKi8KaW1wb3J0IEdvVHJ1ZSBmcm9tICJnb3RydWUtanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RyaWN0OiBmYWxzZSwKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBmdW5jdGlvbiBzdGF0ZSgpIHsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRVc2VyOiBudWxsLAogICAgICBHb1RydWVBdXRoOiBudWxsCiAgICB9OwogIH0sCiAgZ2V0dGVyczogewogICAgbG9nZ2VkSW46IGZ1bmN0aW9uIGxvZ2dlZEluKHN0YXRlKSB7CiAgICAgIHJldHVybiAhIXN0YXRlLmN1cnJlbnRVc2VyOwogICAgfSwKICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY3VycmVudFVzZXI7CiAgICB9LAogICAgbmV0bGlmeVVzZXJMb2dnZWRJbjogZnVuY3Rpb24gbmV0bGlmeVVzZXJMb2dnZWRJbihzdGF0ZSkgewogICAgICByZXR1cm4gISFzdGF0ZS5Hb1RydWVBdXRoLmN1cnJlbnRVc2VyKCk7CiAgICB9LAogICAgY3VycmVudE5ldGxpZnlVc2VyOiBmdW5jdGlvbiBjdXJyZW50TmV0bGlmeVVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLkdvVHJ1ZUF1dGguY3VycmVudFVzZXIoKTsKICAgIH0sCiAgICBHb1RydWVBdXRoOiBmdW5jdGlvbiBHb1RydWVBdXRoKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5Hb1RydWVBdXRoOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfR09UUlVFOiBmdW5jdGlvbiBTRVRfR09UUlVFKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5Hb1RydWVBdXRoID0gdmFsdWU7CiAgICB9LAogICAgU0VUX0NVUlJFTlRfVVNFUjogZnVuY3Rpb24gU0VUX0NVUlJFTlRfVVNFUihzdGF0ZSwgdmFsdWUpIHsKICAgICAgc3RhdGUuY3VycmVudFVzZXIgPSB2YWx1ZTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIC8qKg0KICAgICAqIENhbGxzIGV4dGVybmFsIHNpZ251cCBlbmRwb2ludCBmb3IgbmV3IHVzZXJzIGxvZ2dpbmcgaW4gdmlhIGV4dGVybmFsIHByb3ZpZGVyDQogICAgICogQHBhcmFtIHsqfSBzdG9yZSAtIHZ1ZXggc3RvcmUgb2JqZWN0DQogICAgICogQHBhcmFtIHtzdHJpbmd9IEpXVCAtIEpzb24gd2ViIHRva2VuIHVzZWQgZm9yIGF1dGhvcmlzYXRpb24gaGVhZGVyDQogICAgICogQHJldHVybiB7cHJvbWlzZSA8b2JqZWN0Pn0gLQ0KICAgICAqLwogICAgaW52b2tlU2lnbnVwRnVuY3Rpb246IGZ1bmN0aW9uIGludm9rZVNpZ251cEZ1bmN0aW9uKHN0b3JlLCBKV1QpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgVVJMID0gImh0dHBzOi8vIi5jb25jYXQoZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWUsICIvLm5ldGxpZnkvZnVuY3Rpb25zL2lkZW50aXR5LWV4dGVybmFsLXNpZ251cCIpOwogICAgICAgIGNvbnNvbGUubG9nKCJpbnZva2luZyBleHRlcm5hbCBzaWdudXAgZnVuY3Rpb24gQCIsIFVSTCk7IC8vIE11c3QgcHJvdmlkZSB0aGUgdXNlciBKV1QgaGVyZSBvdGhlcndpc2Ugd2UgY2FudCB1cGRhdGUgdGhlIE5ldGxpZnkgdXNlcgogICAgICAgIC8vIGFwcF9tZXRhZGF0YSBwcm9wZXJ0aWVzIHdoaWNoIGlzIHJlcXVpcmVkIGZvciBzdG9yaW5nIHRoZSB1c2VycyBEQiB0b2tlbgoKICAgICAgICBmZXRjaChVUkwsIHsKICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAiY2FjaGUtY29udHJvbCI6ICJuby1jYWNoZSIsCiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIEpXVAogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIHJldHVybiByZXNwLmpzb24oKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBpZiAoZGF0YS5jb2RlID49IDQwMCkgewogICAgICAgICAgICByZWplY3QoZGF0YS5tc2cpOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJUaGVyZSB3YXMgYW4gZXJyb3IgaW52b2tpbmcgZXh0ZXJuYWwgc2lnbnVwIiwgZGF0YSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdCgiZXJyb3IgaW52b2tpbmcgc2lnbnVwIGZ1bmN0aW9uIGRpcmVjdGx5IiwgZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICogQXV0aG9yaXNlIGFuZCBsb2dpbiB1c2VycyB2aWEgZW1haWwNCiAgICAgKiBAcGFyYW0geyp9IHN0b3JlIC0gdnVleCBzdG9yZSBvYmplY3QNCiAgICAgKiBAcGFyYW0ge29iamVjdH0gY3JlZGVudGlhbHMgLSBvYmplY3QgY29udGFpbmluZyBlbWFpbCBhbmQgcGFzc3dvcmQNCiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gY3JlZGVudGlhbHMuZW1haWwgLSBlbWFpbCBvZiB0aGUgdXNlciBlZyBoZWxsb0BlbWFpbC5jb20NCiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gY3JlZGVudGlhbHMucGFzc3dvcmQgLSBwYXNzd29yZCBzdHJpbmcNCiAgICAgKi8KICAgIGF0dGVtcHRMb2dpbjogZnVuY3Rpb24gYXR0ZW1wdExvZ2luKF9yZWYsIGNyZWRlbnRpYWxzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZTsKICAgICAgY29uc29sZS5sb2coIkF0dGVtcHRpbmcgbG9naW4gZm9yICIuY29uY2F0KGNyZWRlbnRpYWxzLmVtYWlsKSk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgc3RhdGUuR29UcnVlQXV0aC5sb2dpbihjcmVkZW50aWFscy5lbWFpbCwgY3JlZGVudGlhbHMucGFzc3dvcmQsIHRydWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICAgIGNvbW1pdCgiU0VUX0NVUlJFTlRfVVNFUiIsIHJlc3BvbnNlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJBbiBlcnJvciBvY2N1cnJlZCBzaWduaW5nIHVwIiwgZXJyb3IpOwogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEF1dGhvcmlzZSBhbmQgbG9naW4gdXNlciB2aWEgYW4gZXh0ZXJuYWwgcHJvdmlkZXIuIENhbGxpbmcgdGhpcyB3aWxsIG9wZW4gZXh0ZXJuYWwgcHJvdmlkZXIgbG9naW4gd2hpY2ggd2lsbA0KICAgICAqIHJlZGlyZWN0IGJhY2sgdG8gdGhlIGFwcCB3aXRoIEpXVCBpbiB0aGUgVVJMIHdoaWNoIG5lZWRzIHRvIGJlIGRlY29kZWQuDQogICAgICogQHBhcmFtIHsqfSBzdG9yZSAtIHZ1ZXggc3RvcmUgb2JqZWN0DQogICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3ZpZGVyIC0gZWcgIkdvb2dsZSIsICJHaXRIdWIiLCAiR2l0TGFiIg0KICAgICAqLwogICAgYXR0ZW1wdEV4dGVybmFsTG9naW46IGZ1bmN0aW9uIGF0dGVtcHRFeHRlcm5hbExvZ2luKF9yZWYyLCBwcm92aWRlcikgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBzdGF0ZS5Hb1RydWVBdXRoLmxvZ2luRXh0ZXJuYWxVcmwocHJvdmlkZXIpOwogICAgfSwKCiAgICAvKioNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Kn0gc3RvcmUgLSB2dWV4IHN0b3JlIG9iamVjdA0KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgLSBvYmplY3QgY29udGFpbmluZyBKV1QgYW5kIG90aGVyIG1ldGEgZGF0YSB0byBjcmVhdGUvbG9naW4gYSB1c2VyIHZpYSBleHRlcm5hbCBwcm92aWRlcg0KICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwYXJhbXMuYWNjZXNzX3Rva2VuIC0gSldUDQogICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHBhcmFtcy5leHBpcmVzX2F0IGVnLiAxNTc3NTczNDkzMDAwDQogICAgICogQHByb3BlcnR5IHtzdHJpbmd9IHBhcmFtcy5leHBpcmVzX2luIGVnLiAiMzYwMCINCiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gcGFyYW1zLnJlZnJlc2hfdG9rZW4gZWcuICJVWGFySUFyWktEdDNqLTVLeWx0TEp3Ig0KICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwYXJhbXMudG9rZW5fdHlwZTogZWcuICJiZWFyZXIiDQogICAgICovCiAgICBjb21wbGV0ZUV4dGVybmFsTG9naW46IGZ1bmN0aW9uIGNvbXBsZXRlRXh0ZXJuYWxMb2dpbihfcmVmMywgcGFyYW1zKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoLAogICAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgICAgLy8gVGhpcyBjdXJyZW50bHkgZ2V0dGluZyBjYWxsZWQgaW4gc3JjXGhlbHBlcnNcYXV0aG9yaXNlLXRva2Vucy5qcwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIC8vIElmIGEgdXNlciBhbHJlYWR5IGV4aXN0cywgdGhpcyB3aWxsIHJldHVybiB0aGUgZXhpc3RpbmcgdXNlciBhbmQgbm90IGNyZWF0ZSBhIG5ldyBvbmUKICAgICAgICBzdGF0ZS5Hb1RydWVBdXRoLmNyZWF0ZVVzZXIocGFyYW1zKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiQ29tcGxldGVkIGV4dGVybmFsIGxvZ2luIGZvciB1c2VyIElEICIsIHVzZXIuaWQpOyAvL0lmIGRiIHRva2VuIGlzIHByZXNlbnQgaGVyZSwgdGhlcmVzIG5vIG5lZWQgdG8gY2FsbCB0aGUgZXh0ZXJuYWwgc2lnbnVwIHNvIGV4aXQgZWFybHkKCiAgICAgICAgICBpZiAodXNlci5hcHBfbWV0YWRhdGEuZGJfdG9rZW4pIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIkEgZGIgdG9rZW4gaGFzIGFscmVhZHkgYmVlbiBpbnRpYWxpc2VkIGZvciB0aGlzIHVzZXJJRCAiLCB1c2VyLmlkKTsKICAgICAgICAgICAgY29tbWl0KCJTRVRfQ1VSUkVOVF9VU0VSIiwgdXNlcik7CiAgICAgICAgICAgIHJlc29sdmUoIlNpZ25lZCBpbiBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGRpc3BhdGNoKCJpbnZva2VTaWdudXBGdW5jdGlvbiIsIHBhcmFtcy5hY2Nlc3NfdG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgICAgY29tbWl0KCJTRVRfQ1VSUkVOVF9VU0VSIiwgcmVzcCk7CiAgICAgICAgICAgIHJlc29sdmUoIlNpZ25lZCBpbiBzdWNjZXNzZnVsbHkiKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgfSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICoNCiAgICAgKiBAcGFyYW0geyp9IHN0b3JlIC0gdnVleCBzdG9yZSBvYmplY3QNCiAgICAgKiBAcGFyYW0ge29iamVjdH0gY3JlZGVudGlhbHMgLSBvYmplY3QgY29udGFpbmluZyBlbWFpbCBhbmQgcGFzc3dvcmQNCiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gY3JlZGVudGlhbHMuZW1haWwgLSBlbWFpbCBvZiB0aGUgdXNlciBlZyBoZWxsb0BlbWFpbC5jb20NCiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gY3JlZGVudGlhbHMucGFzc3dvcmQgLSBwYXNzd29yZCBzdHJpbmcNCiAgICAgKi8KICAgIGF0dGVtcHRTaWdudXA6IGZ1bmN0aW9uIGF0dGVtcHRTaWdudXAoX3JlZjQsIGNyZWRlbnRpYWxzKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWY0LnN0YXRlOwogICAgICBjb25zb2xlLmxvZygiQXR0ZW1wdGluZyBzaWdudXAgZm9yICIuY29uY2F0KGNyZWRlbnRpYWxzLmVtYWlsLCAiLi4uIiksIGNyZWRlbnRpYWxzKTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBzdGF0ZS5Hb1RydWVBdXRoLnNpZ251cChjcmVkZW50aWFscy5lbWFpbCwgY3JlZGVudGlhbHMucGFzc3dvcmQsIHsKICAgICAgICAgIGZ1bGxfbmFtZTogY3JlZGVudGlhbHMubmFtZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiQ29uZmlybWF0aW9uIGVtYWlsIHNlbnQiLCByZXNwb25zZSk7CiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJBbiBlcnJvciBvY2N1cnJlZCB0cnlpbmcgdG8gc2lnbnVwIiwgZXJyb3IpOwogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFRoaXMgY29uZmlybXMgYSBuZXcgdXNlciBmcm9tIGFuIGVtYWlsIHNpZ251cCBieSBwYXJzaW5nIHRoZSB0b2tlbiB3aGljaCBoYXMgYmVlbiBleHRyYWN0ZWQgZnJvbSB0aGUgTmV0bGlmeQ0KICAgICAqIGNvbmZpcm1hdGlvbiBlbWFpbC4NCiAgICAgKiBAcGFyYW0geyp9IHN0b3JlIC0gdnVleCBzdG9yZSBvYmplY3QNCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdG9rZW4gLSB0b2tlbiBmcm9tIGNvbmZpbXJhdGlvbiBlbWFpbCBlZy4gIkJGWDdvbEh4SXdUaGxmakxHR2ZhQ0EiDQogICAgICovCiAgICBhdHRlbXB0Q29uZmlybWF0aW9uOiBmdW5jdGlvbiBhdHRlbXB0Q29uZmlybWF0aW9uKF9yZWY1LCB0b2tlbikgewogICAgICB2YXIgc3RhdGUgPSBfcmVmNS5zdGF0ZTsKICAgICAgY29uc29sZS5sb2coIkF0dGVtcHRpbmcgdG8gdmVyaWZ5IHRva2VuIiwgdG9rZW4pOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHN0YXRlLkdvVHJ1ZUF1dGguY29uZmlybSh0b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJVc2VyIGhhcyBiZWVuIGNvbmZpcm1lZCIpOwogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiQW4gZXJyb3Igb2NjdXJyZWQgdHJ5aW5nIHRvIGNvbmZpcm0gdGhlIHVzZXIiLCBlcnJvcik7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICogU2lnbiBvdXQgdGhlIGN1cnJlbnQgdXNlciBpZiB0aGV5IGFyZSBsb2dnZWQgaW4uDQogICAgICogVE9ETzogUHJvbWlzaWZ5IHRoaXMsIGFuZCByZW1vdmUgYWxlcnQgb3V0LiBmb2xsb3cgdXAgVUkgY2hhbmdlcyBzaG91bGQgYmUgaGFuZGxlZCBvdXRzaWRlIG9mIHZ1ZXgNCiAgICAgKiBAcGFyYW0geyp9IHN0b3JlIC0gdnVleCBzdG9yZSBvYmplY3QNCiAgICAgKi8KICAgIGF0dGVtcHRMb2dvdXQ6IGZ1bmN0aW9uIGF0dGVtcHRMb2dvdXQoX3JlZjYpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjYuc3RhdGUsCiAgICAgICAgICBjb21taXQgPSBfcmVmNi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgc3RhdGUuR29UcnVlQXV0aC5jdXJyZW50VXNlcigpLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJVc2VyIGxvZ2dlZCBvdXQiLCByZXNwKTsKICAgICAgICAgIGFsZXJ0KCJ5b3UgaGF2ZSBsb2dnZWQgb3V0Iik7CiAgICAgICAgICBjb21taXQoIlNFVF9DVVJSRU5UX1VTRVIiLCBudWxsKTsKICAgICAgICAgIHJlc29sdmUocmVzcCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJDb3VsZCBub3QgbG9nIHVzZXIgb3V0IiwgZXJyb3IpOwogICAgICAgICAgY29tbWl0KCJTRVRfQ1VSUkVOVF9VU0VSIiwgbnVsbCk7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICpub3QgcmVxdWlyZWQsIGRlbGV0ZSBhdCBzb21lIHBvaW50DQogICAgICogQHBhcmFtIHsqfSBzdG9yZSAtIHZ1ZXggc3RvcmUgb2JqZWN0DQogICAgICovCiAgICBnZXRVc2VySldUVG9rZW46IGZ1bmN0aW9uIGdldFVzZXJKV1RUb2tlbihfcmVmNykgewogICAgICB2YXIgZ2V0dGVycyA9IF9yZWY3LmdldHRlcnMsCiAgICAgICAgICBzdGF0ZSA9IF9yZWY3LnN0YXRlOwogICAgICBjb25zb2xlLmxvZyhnZXR0ZXJzLmN1cnJlbnROZXRsaWZ5VXNlcik7CgogICAgICBpZiAoIWdldHRlcnMuY3VycmVudE5ldGxpZnlVc2VyKSB7CiAgICAgICAgYWxlcnQoIlBsZWFzZSBzaWduIGluIGFnYWluIik7CiAgICAgICAgY29uc29sZS53YXJuKCJVc2VyIG5lZWRzIHRvIHNpZ24gaW4gYWdhaW4iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHN0YXRlLkdvVHJ1ZUF1dGguY3VycmVudFVzZXIoKS5qd3QoKS50aGVuKGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgIGFsZXJ0KCJnb3QgdXNlciB0b2tlbjogIiwgdG9rZW4pOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICogVGhpcyBzaG91bGQgYmUgZGVsZXRlZCBhdCBzb21lIHBvaW50DQogICAgICovCiAgICBnZXRDdXJyZW50VXNlcjogZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoX3JlZjgpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjguc3RhdGU7CiAgICAgIGNvbnNvbGUubG9nKCJVc2VyIE9iamVjdCIsIHN0YXRlLkdvVHJ1ZUF1dGguY3VycmVudFVzZXIoKSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEluaXRpYWxpc2VzIGEgR29UcnVlIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBhbHNvIGNoZWNrcyBpZiB1c2VyIGlzIGluIGEgbG9jYWwgZW52aXJvbm1lbnQgIGJhc2VkIG9uIHRoZSBVUkwuDQogICAgICogdGhpcyB1cGRhdGVzIHRoZSBgYXBwL1NFVF9ERVZfRU5WYCBmbGFnLiBUaGlzIGZhY2lsaXRhdGVzIGEgemVyby1jb25maWcgc2V0dXAgYXMgYSBkZXZlbG9wZXIgY2FuIGlucHV0IHRoZWlyDQogICAgICogbmV0bGlmeSBVUkwgaW4gdGhlIFVJIChzZWUgdGhlIHRoZSBgU2V0TmV0bGlmeVVSTC52dWVgIGNvbXBvbmVudCkuIEluc3BpcmVkIGZyb20gdGhlIG9mZmljaWFsIE5ldGxpZnkNCiAgICAgKiBJZGVudGl0eSB3aWRnZXQuDQogICAgICogQHBhcmFtIHsqfSBzdG9yZSAtIHZ1ZXggc3RvcmUgb2JqZWN0DQogICAgICovCiAgICBpbml0QXV0aDogZnVuY3Rpb24gaW5pdEF1dGgoX3JlZjkpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY5LmNvbW1pdCwKICAgICAgICAgIHJvb3RHZXR0ZXJzID0gX3JlZjkucm9vdEdldHRlcnM7CiAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzUyODQxNDcvdmFsaWRhdGluZy1pcHY0LWFkZHJlc3Nlcy13aXRoLXJlZ2V4cC81NzQyMTkzMSM1NzQyMTkzMQogICAgICB2YXIgSVB2NFBhdHRlcm4gPSAvXGIoKFxkfFsxLTldXGR8MVxkXGR8MlswLTRdXGR8MjVbMC01XSlcLil7M30oXGR8WzEtOV1cZHwxXGRcZHwyWzAtNF1cZHwyNVswLTVdKVxiLzsKICAgICAgdmFyIGhvc3ROYW1lID0gZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWU7CiAgICAgIHZhciBBUElVcmwgPSAiaHR0cHM6Ly8iLmNvbmNhdChob3N0TmFtZSwgIi8ubmV0bGlmeS9pZGVudGl0eSIpOwoKICAgICAgdmFyIGluaXROZXdHb1RydWUgPSBmdW5jdGlvbiBpbml0TmV3R29UcnVlKEFQSVVybCkgewogICAgICAgIHJldHVybiBuZXcgR29UcnVlKHsKICAgICAgICAgIEFQSVVybDogQVBJVXJsLAogICAgICAgICAgYXVkaWVuY2U6ICIiLAogICAgICAgICAgc2V0Q29va2llOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH07IC8vIERldGVjdCBpZiBhcHAgaXMgYmVpbmcgcnVuIGluIGEgZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnQsIGlmIHNvIGEgZmxhZyBpcyBzZXQgdG8gaW5kaWNhdGUgdGhpcyBzbyB0aGF0IGl0IGlzCiAgICAgIC8vIHBvc3NpYmxlIHRvIHNldCB0aGUgVVJMIGZvciB0aGUgbmV0bGlmeSBpZGVudGl0eSBpbiB0aGUgbG9naW4gY29tcG9uZW50LgogICAgICAvLyBUT0RPIDogTW92ZSB0aGlzIGxvZ2ljIGludG8gYSBzZXBhcmF0ZSBhY3Rpb24uCgoKICAgICAgaWYgKGhvc3ROYW1lLm1hdGNoKElQdjRQYXR0ZXJuKSB8fCBob3N0TmFtZSA9PT0gImxvY2FsaG9zdCIpIHsKICAgICAgICBjb25zb2xlLmxvZygiTG9va3MgbGlrZSB5b3VyIGluIGEgZGV2IGVudmlyb25tZW50IiwgaG9zdE5hbWUpOwogICAgICAgIGNvbW1pdCgiYXBwL1NFVF9ERVZfRU5WIiwgdHJ1ZSwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCJJbml0aWFsaXNpbmcgR28gVHJ1ZSBjbGllbnQgd2l0aCIsICJodHRwczovLyIuY29uY2F0KHJvb3RHZXR0ZXJzWyJhcHAvc2l0ZVVSTCJdLCAiLy5uZXRsaWZ5L2lkZW50aXR5IikpOwogICAgICAgIGNvbW1pdCgiU0VUX0dPVFJVRSIsIGluaXROZXdHb1RydWUoImh0dHBzOi8vIi5jb25jYXQocm9vdEdldHRlcnNbImFwcC9zaXRlVVJMIl0sICIvLm5ldGxpZnkvaWRlbnRpdHkiKSkpOwogICAgICAgIHRoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uIChtdXRhdGlvbikgewogICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09ICJhcHAvU0VUX1NJVEVfVVJMIikgewogICAgICAgICAgICBjb25zb2xlLmxvZygiUmUtaW5pdGlhbGlzaW5nIEdvIFRydWUgY2xpZW50IHdpdGgiLCByb290R2V0dGVyc1siYXBwL3NpdGVVUkwiXSk7CiAgICAgICAgICAgIGNvbW1pdCgiU0VUX0dPVFJVRSIsIGluaXROZXdHb1RydWUoImh0dHBzOi8vIi5jb25jYXQocm9vdEdldHRlcnNbImFwcC9zaXRlVVJMIl0sICIvLm5ldGxpZnkvaWRlbnRpdHkiKSkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coIkluaXRpYWxpc2luZyBHbyBUcnVlIGNsaWVudCB3aXRoICIsIEFQSVVybCk7CiAgICAgIGNvbW1pdCgiU0VUX0dPVFJVRSIsIGluaXROZXdHb1RydWUoQVBJVXJsKSk7CiAgICB9LAogICAgcmVxdWVzdFBhc3N3b3JkUmVjb3ZlcjogZnVuY3Rpb24gcmVxdWVzdFBhc3N3b3JkUmVjb3ZlcihfcmVmMTAsIGVtYWlsKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYxMC5zdGF0ZTsKICAgICAgc3RhdGUuR29UcnVlQXV0aC5yZXF1ZXN0UGFzc3dvcmRSZWNvdmVyeShlbWFpbCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gYWxlcnQoIlJlY292ZXJ5IGVtYWlsIHNlbnQiLCB7CiAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIGFsZXJ0KCJFcnJvciBzZW5kaW5nIHJlY292ZXJ5IG1haWw6IiwgZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBhdHRlbXB0UGFzc3dvcmRSZWNvdmVyeTogZnVuY3Rpb24gYXR0ZW1wdFBhc3N3b3JkUmVjb3ZlcnkoX3JlZjExLCB0b2tlbikgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMTEuc3RhdGUsCiAgICAgICAgICBjb21taXQgPSBfcmVmMTEuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHN0YXRlLkdvVHJ1ZUF1dGgucmVjb3Zlcih0b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJTaWduaW5nIGluIHVzZXIgd2l0aCByZWNvdmVyeSB0b2tlbiIpOwogICAgICAgICAgY29tbWl0KCJTRVRfQ1VSUkVOVF9VU0VSIiwgcmVzcG9uc2UpOwogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCJGYWlsZWQgdG8gdmVyaWZ5IHJlY292ZXIgdG9rZW46ICVvIiwgZXJyb3IpOwogICAgICAgICAgcmVqZWN0KCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZVVzZXJBY2NvdW50OiBmdW5jdGlvbiB1cGRhdGVVc2VyQWNjb3VudChfcmVmMTIsIHVzZXJEYXRhKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYxMi5zdGF0ZTsKICAgICAgLy9UT0RPIDogZml4IGJ1ZyBpbiB0aGlzIGFjdGlvbiAtIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGl1YmFjYS92dWUtbmV0bGlmeS1mYXVuYS1zdGFydGVyLWtpdC9pc3N1ZXMvMTIKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgdXNlciA9IHN0YXRlLkdvVHJ1ZUF1dGguY3VycmVudFVzZXIoKTsKICAgICAgICB1c2VyLnVwZGF0ZSh1c2VyRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJVcGRhdGVkIHVzZXIgYWNjb3VudCBkZXRhaWxzIik7CiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byB1cGRhdGUgdXNlciBhY2NvdW50OiAlbyIsIGVycm9yKTsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["C:/Users/ASUS/Desktop/Blog-project/blog-app/src/store/modules/auth.js"],"names":["GoTrue","strict","namespaced","state","currentUser","GoTrueAuth","getters","loggedIn","netlifyUserLoggedIn","currentNetlifyUser","mutations","SET_GOTRUE","value","SET_CURRENT_USER","actions","invokeSignupFunction","store","JWT","Promise","resolve","reject","URL","document","location","hostname","console","log","fetch","method","headers","Authorization","then","resp","json","data","code","msg","error","catch","attemptLogin","credentials","commit","email","login","password","response","attemptExternalLogin","provider","window","href","loginExternalUrl","completeExternalLogin","params","dispatch","createUser","user","id","app_metadata","db_token","access_token","attemptSignup","signup","full_name","name","attemptConfirmation","token","confirm","attemptLogout","logout","alert","getUserJWTToken","warn","jwt","getCurrentUser","initAuth","rootGetters","IPv4Pattern","hostName","APIUrl","initNewGoTrue","audience","setCookie","match","root","subscribe","mutation","type","requestPasswordRecover","requestPasswordRecovery","attemptPasswordRecovery","recover","updateUserAccount","userData","update"],"mappings":"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","sourcesContent":["/**\r\n * This module is responsible for all state and actions related to the current authenticated user.\r\n */\r\nimport GoTrue from \"gotrue-js\";\r\n\r\nexport default {\r\n  strict: false,\r\n  namespaced: true,\r\n\r\n  state() {\r\n    return {\r\n      currentUser: null,\r\n      GoTrueAuth: null\r\n    };\r\n  },\r\n  getters: {\r\n    loggedIn: state => !!state.currentUser,\r\n\r\n    currentUser: state => state.currentUser,\r\n\r\n    netlifyUserLoggedIn: state => !!state.GoTrueAuth.currentUser(),\r\n\r\n    currentNetlifyUser: state => state.GoTrueAuth.currentUser(),\r\n\r\n    GoTrueAuth: state => state.GoTrueAuth\r\n  },\r\n  mutations: {\r\n    SET_GOTRUE(state, value) {\r\n      state.GoTrueAuth = value;\r\n    },\r\n\r\n    SET_CURRENT_USER(state, value) {\r\n      state.currentUser = value;\r\n    }\r\n  },\r\n  actions: {\r\n    /**\r\n     * Calls external signup endpoint for new users logging in via external provider\r\n     * @param {*} store - vuex store object\r\n     * @param {string} JWT - Json web token used for authorisation header\r\n     * @return {promise <object>} -\r\n     */\r\n    invokeSignupFunction(store, JWT) {\r\n      return new Promise((resolve, reject) => {\r\n        let URL = `https://${document.location.hostname}/.netlify/functions/identity-external-signup`;\r\n        console.log(\"invoking external signup function @\", URL);\r\n        // Must provide the user JWT here otherwise we cant update the Netlify user\r\n        // app_metadata properties which is required for storing the users DB token\r\n        fetch(URL, {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"cache-control\": \"no-cache\",\r\n            Authorization: \"Bearer \" + JWT\r\n          }\r\n        })\r\n          .then(resp => resp.json())\r\n          .then(data => {\r\n            if (data.code >= 400) {\r\n              reject(data.msg);\r\n              console.error(\r\n                \"There was an error invoking external signup\",\r\n                data\r\n              );\r\n            }\r\n            resolve(data);\r\n          })\r\n          .catch(error => {\r\n            reject(\"error invoking signup function directly\", error);\r\n          });\r\n      });\r\n    },\r\n\r\n    /**\r\n     * Authorise and login users via email\r\n     * @param {*} store - vuex store object\r\n     * @param {object} credentials - object containing email and password\r\n     * @property {string} credentials.email - email of the user eg hello@email.com\r\n     * @property {string} credentials.password - password string\r\n     */\r\n    attemptLogin({ commit, state }, credentials) {\r\n      console.log(`Attempting login for ${credentials.email}`);\r\n      return new Promise((resolve, reject) => {\r\n        state.GoTrueAuth.login(credentials.email, credentials.password, true)\r\n          .then(response => {\r\n            resolve(response);\r\n            commit(\"SET_CURRENT_USER\", response);\r\n          })\r\n          .catch(error => {\r\n            console.log(\"An error occurred signing up\", error);\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n\r\n    /**\r\n     * Authorise and login user via an external provider. Calling this will open external provider login which will\r\n     * redirect back to the app with JWT in the URL which needs to be decoded.\r\n     * @param {*} store - vuex store object\r\n     * @param {string} provider - eg \"Google\", \"GitHub\", \"GitLab\"\r\n     */\r\n    attemptExternalLogin({ state }, provider) {\r\n      window.location.href = state.GoTrueAuth.loginExternalUrl(provider);\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param {*} store - vuex store object\r\n     * @param {object} params - object containing JWT and other meta data to create/login a user via external provider\r\n     * @property {string} params.access_token - JWT\r\n     * @property {number} params.expires_at eg. 1577573493000\r\n     * @property {string} params.expires_in eg. \"3600\"\r\n     * @property {string} params.refresh_token eg. \"UXarIArZKDt3j-5KyltLJw\"\r\n     * @property {string} params.token_type: eg. \"bearer\"\r\n     */\r\n\r\n    completeExternalLogin({ commit, dispatch, state }, params) {\r\n      // This currently getting called in src\\helpers\\authorise-tokens.js\r\n      return new Promise((resolve, reject) => {\r\n        // If a user already exists, this will return the existing user and not create a new one\r\n        state.GoTrueAuth.createUser(params)\r\n          .then(user => {\r\n            console.log(\"Completed external login for user ID \", user.id);\r\n            //If db token is present here, theres no need to call the external signup so exit early\r\n            if (user.app_metadata.db_token) {\r\n              console.log(\r\n                \"A db token has already been intialised for this userID \",\r\n                user.id\r\n              );\r\n              commit(\"SET_CURRENT_USER\", user);\r\n              resolve(\"Signed in successfully\");\r\n              return;\r\n            }\r\n\r\n            dispatch(\"invokeSignupFunction\", params.access_token)\r\n              .then(resp => {\r\n                commit(\"SET_CURRENT_USER\", resp);\r\n                resolve(\"Signed in successfully\");\r\n              })\r\n              .catch(error => {\r\n                reject(error);\r\n              });\r\n          })\r\n          .catch(error => {\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param {*} store - vuex store object\r\n     * @param {object} credentials - object containing email and password\r\n     * @property {string} credentials.email - email of the user eg hello@email.com\r\n     * @property {string} credentials.password - password string\r\n     */\r\n    attemptSignup({ state }, credentials) {\r\n      console.log(`Attempting signup for ${credentials.email}...`, credentials);\r\n      return new Promise((resolve, reject) => {\r\n        state.GoTrueAuth.signup(credentials.email, credentials.password, {\r\n          full_name: credentials.name\r\n        })\r\n          .then(response => {\r\n            console.log(`Confirmation email sent`, response);\r\n            resolve(response);\r\n          })\r\n          .catch(error => {\r\n            console.log(\"An error occurred trying to signup\", error);\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n\r\n    /**\r\n     * This confirms a new user from an email signup by parsing the token which has been extracted from the Netlify\r\n     * confirmation email.\r\n     * @param {*} store - vuex store object\r\n     * @param {string} token - token from confimration email eg. \"BFX7olHxIwThlfjLGGfaCA\"\r\n     */\r\n    attemptConfirmation({ state }, token) {\r\n      console.log(\"Attempting to verify token\", token);\r\n      return new Promise((resolve, reject) => {\r\n        state.GoTrueAuth.confirm(token)\r\n          .then(response => {\r\n            console.log(\"User has been confirmed\");\r\n            resolve(response);\r\n          })\r\n          .catch(error => {\r\n            console.log(\"An error occurred trying to confirm the user\", error);\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n\r\n    /**\r\n     * Sign out the current user if they are logged in.\r\n     * TODO: Promisify this, and remove alert out. follow up UI changes should be handled outside of vuex\r\n     * @param {*} store - vuex store object\r\n     */\r\n    attemptLogout({ state, commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        state.GoTrueAuth.currentUser()\r\n          .logout()\r\n          .then(resp => {\r\n            console.log(\"User logged out\", resp);\r\n            alert(\"you have logged out\");\r\n            commit(\"SET_CURRENT_USER\", null);\r\n            resolve(resp);\r\n          })\r\n          .catch(error => {\r\n            console.error(\"Could not log user out\", error);\r\n            commit(\"SET_CURRENT_USER\", null);\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n\r\n    /**\r\n     *not required, delete at some point\r\n     * @param {*} store - vuex store object\r\n     */\r\n    getUserJWTToken({ getters, state }) {\r\n      console.log(getters.currentNetlifyUser);\r\n      if (!getters.currentNetlifyUser) {\r\n        alert(\"Please sign in again\");\r\n        console.warn(\"User needs to sign in again\");\r\n        return;\r\n      }\r\n      state.GoTrueAuth.currentUser()\r\n        .jwt()\r\n        .then(token => {\r\n          alert(\"got user token: \", token);\r\n        });\r\n    },\r\n\r\n    /**\r\n     * This should be deleted at some point\r\n     */\r\n    getCurrentUser({ state }) {\r\n      console.log(\"User Object\", state.GoTrueAuth.currentUser());\r\n    },\r\n\r\n    /**\r\n     * Initialises a GoTrue instance. This method also checks if user is in a local environment  based on the URL.\r\n     * this updates the `app/SET_DEV_ENV` flag. This facilitates a zero-config setup as a developer can input their\r\n     * netlify URL in the UI (see the the `SetNetlifyURL.vue` component). Inspired from the official Netlify\r\n     * Identity widget.\r\n     * @param {*} store - vuex store object\r\n     */\r\n    initAuth({ commit, rootGetters }) {\r\n      // https://stackoverflow.com/questions/5284147/validating-ipv4-addresses-with-regexp/57421931#57421931\r\n      const IPv4Pattern = /\\b((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\b/;\r\n      const hostName = document.location.hostname;\r\n      const APIUrl = `https://${hostName}/.netlify/identity`;\r\n      const initNewGoTrue = APIUrl => {\r\n        return new GoTrue({\r\n          APIUrl: APIUrl,\r\n          audience: \"\",\r\n          setCookie: true\r\n        });\r\n      };\r\n\r\n      // Detect if app is being run in a development environment, if so a flag is set to indicate this so that it is\r\n      // possible to set the URL for the netlify identity in the login component.\r\n      // TODO : Move this logic into a separate action.\r\n      if (hostName.match(IPv4Pattern) || hostName === \"localhost\") {\r\n        console.log(\"Looks like your in a dev environment\", hostName);\r\n        commit(\"app/SET_DEV_ENV\", true, { root: true });\r\n\r\n        console.log(\r\n          \"Initialising Go True client with\",\r\n          `https://${rootGetters[\"app/siteURL\"]}/.netlify/identity`\r\n        );\r\n        commit(\r\n          \"SET_GOTRUE\",\r\n          initNewGoTrue(\r\n            `https://${rootGetters[\"app/siteURL\"]}/.netlify/identity`\r\n          )\r\n        );\r\n\r\n        this.subscribe(mutation => {\r\n          if (mutation.type === \"app/SET_SITE_URL\") {\r\n            console.log(\r\n              \"Re-initialising Go True client with\",\r\n              rootGetters[\"app/siteURL\"]\r\n            );\r\n            commit(\r\n              \"SET_GOTRUE\",\r\n              initNewGoTrue(\r\n                `https://${rootGetters[\"app/siteURL\"]}/.netlify/identity`\r\n              )\r\n            );\r\n          }\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      console.log(\"Initialising Go True client with \", APIUrl);\r\n      commit(\"SET_GOTRUE\", initNewGoTrue(APIUrl));\r\n    },\r\n\r\n    requestPasswordRecover({ state }, email) {\r\n      state.GoTrueAuth.requestPasswordRecovery(email)\r\n        .then(response => alert(\"Recovery email sent\", { response }))\r\n        .catch(error => alert(\"Error sending recovery mail:\", error));\r\n    },\r\n\r\n    attemptPasswordRecovery({ state, commit }, token) {\r\n      return new Promise((resolve, reject) => {\r\n        state.GoTrueAuth.recover(token)\r\n          .then(response => {\r\n            console.log(\"Signing in user with recovery token\");\r\n            commit(\"SET_CURRENT_USER\", response);\r\n            resolve(response);\r\n          })\r\n          .catch(error => {\r\n            console.error(\"Failed to verify recover token: %o\", error);\r\n            reject();\r\n          });\r\n      });\r\n    },\r\n\r\n    updateUserAccount({ state }, userData) {\r\n      //TODO : fix bug in this action - https://github.com/chiubaca/vue-netlify-fauna-starter-kit/issues/12\r\n      return new Promise((resolve, reject) => {\r\n        const user = state.GoTrueAuth.currentUser();\r\n        user\r\n          .update(userData)\r\n          .then(response => {\r\n            console.log(\"Updated user account details\");\r\n            resolve(response);\r\n          })\r\n          .catch(error => {\r\n            console.error(\"Failed to update user account: %o\", error);\r\n            reject(error);\r\n          });\r\n      });\r\n    }\r\n  }\r\n};\r\n"]}]}